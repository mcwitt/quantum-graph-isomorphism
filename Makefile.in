build = @build@

CC = gcc
CFLAGS = -Wall -O3 -fPIC
#CFLAGS = -Wall -g

CFLAGS += -DVERSION=\"$(shell git describe --abbrev=0)\"
LDLIBS = -lm -lgsl -lgslcblas
OBJECTS = amatrix.o cg.o global.o nlcg.o params.o qaa.o
OBJS = $(addprefix $(build)/, $(OBJECTS))

$(build)/%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

$(build)/cg: $(OBJS)
	$(CC) $^ -o $@ $(LDLIBS) 

.PHONY: clean

clean:
	$(RM) *.o


